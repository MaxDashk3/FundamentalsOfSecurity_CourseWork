@using Movies.ViewModels;
@model List<MovieViewModel>

@{
    ViewData["Title"] = "Sessions";

    bool Admin = User.IsInRole("Admins");
}

<h1>Sessions</h1>

<p>
    @if (Admin)
    {
        <a asp-action="Create">Create New</a>
    }
</p>

@foreach (var movie in Model)
{
    <h3><a href="/movies/Details/@movie.Id">@movie.Title</a></h3>
    <details>
        <summary></summary>
        <br />
        <div>
            <h4>Availible sessions:</h4>
            @{
                await Html.RenderPartialAsync("~/Views/Shared/SessionsTable.cshtml", movie.Sessions);
            }
        </div>
        <br />
    </details>
    <br />
}
